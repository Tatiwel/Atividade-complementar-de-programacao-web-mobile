@model IEnumerable<DestinoCerto.Models.Transport>

<!DOCTYPE html>
<html>
<head>
    <title>Relatório de Transportes</title>
    <link href="~/Content/Cadastro.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/Table.css" rel="stylesheet" type="text/css" />
    <script>
        window.onload = function () {
            var totalKm = 0;
            var valorTotal = 0;

            var table = document.querySelector('.table');
            var rows = table.getElementsByTagName('tr');

            for (var i = 1; i < rows.length; i++) { // Começa do índice 1 para evitar o cabeçalho da tabela
                var cells = rows[i].getElementsByTagName('td');
                var km = parseFloat(cells[4].innerText); // Ajuste o índice se necessário
                totalKm += km;
            }

            valorTotal = totalKm * 0.40;
            document.getElementById('valueTotal').innerText = 'Total Arrecadado: R$ ' + valorTotal.toFixed(2);
        };
    </script>
</head>
<body>
    <div class="box">
        <h2>Relatório de Transportes</h2>
        <div>
            <form method="post" action="@Url.Action("RelatorioFinanceiro", "FinancialReport")">
                <label for="dataInicio">Data de Início:</label>
                <input type="date" name="dataInicio" id="dataInicio" class="form-control" />

                <label for="dataFim">Data de Fim:</label>
                <input type="date" name="dataFim" id="dataFim" class="form-control" />

                <button type="submit" class="btnTable">Filtrar</button>
            </form>
        </div>

        @if (Model != null && Model.Any())
        {
            <table class="table">
                <thead>
                    <tr>
                        <th>Placa do Veículo</th>
                        <th>CPF do Passageiro</th>
                        <th>Data do Transporte</th>
                        <th>Hora do Transporte</th>
                        <th>Quantidade de KM do Trajeto</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var transport in Model)
                    {
                        <tr>
                            <td>@transport.PlacaVeiculo</td>
                            <td>@transport.CpfPassageiro</td>
                            <td>@transport.DataTransporte</td>
                            <td>@transport.HoraTransporte</td>
                            <td>@transport.KmTrajeto</td>
                        </tr>
                    }
                </tbody>
            </table>
            <div class="valueTotal">
                <strong id="valueTotal"></strong>
            </div>
        }
        else
        {
            <p>Nenhum transporte registrado.</p>
        }

    </div>
</body>
</html>
